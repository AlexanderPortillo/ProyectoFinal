<!DOCTYPE html>
<html>

<head>
  <title>Manipulación del LocalStorage</title>
</head>

<body>
  <h1>Manipulación del LocalStorage</h1>

  <h2>Agregar Elemento</h2>
  <div>
    <label for="inputUsuario">Nombre de usuario:</label>
    <input type="text" id="inputUsuario">
    <br>
    <label for="inputNombreCompleto">Nombre completo:</label>
    <input type="text" id="inputNombreCompleto">
    <br>
    <label for="inputCorreoElectronico">Correo electrónico:</label>
    <input type="text" id="inputCorreoElectronico">
    <br>
    <label for="inputContrasena">Contraseña:</label>
    <input type="password" id="inputContrasena">
    <br>
    <button onclick="agregarElemento()">Agregar</button>
  </div>

  <h2>Buscar y Actualizar Elemento</h2>
  <div>
    <label for="inputBuscarUsuario">Buscar por nombre de usuario:</label>
    <input type="text" id="inputBuscarUsuario">
    <button onclick="buscarElemento()">Buscar</button>
  </div>

  <div id="container"></div>

  <script>
    // Clave utilizada para almacenar los elementos en el localStorage
    var clave = "elementos";

    // Función para agregar un elemento al localStorage
    function agregarElemento() {
      var inputUsuario = document.getElementById("inputUsuario");
      var inputNombreCompleto = document.getElementById("inputNombreCompleto");
      var inputCorreoElectronico = document.getElementById("inputCorreoElectronico");
      var inputContrasena = document.getElementById("inputContrasena");

      var nuevoElemento = {
        nombreUsuario: inputUsuario.value,
        nombreCompleto: inputNombreCompleto.value,
        correoElectronico: inputCorreoElectronico.value,
        contraseña: inputContrasena.value
      };

      var elementos = JSON.parse(localStorage.getItem(clave)) || [];
      elementos.push(nuevoElemento);
      localStorage.setItem(clave, JSON.stringify(elementos));

      alert("Elemento agregado al LocalStorage");
    }

    // Función para buscar y mostrar un elemento por nombre de usuario
    function buscarElemento() {
      var inputBuscarUsuario = document.getElementById("inputBuscarUsuario");
      var nombreUsuarioBuscado = inputBuscarUsuario.value;

      var elementos = JSON.parse(localStorage.getItem(clave)) || [];
      var encontrado = false;

      for (var i = 0; i < elementos.length; i++) {
        var elemento = elementos[i];

        if (elemento.nombreUsuario === nombreUsuarioBuscado) {
          mostrarElemento(elemento);
          encontrado = true;
          break;
        }
      }

      if (!encontrado) {
        alert("No se encontró el elemento en el LocalStorage");
      }
    }

    // Función para mostrar un elemento en pantalla y permitir su actualización

    function mostrarElemento(elemento) {
      var container = document.getElementById("container");
      container.innerHTML = "";

      var plantilla = `
        <label>Nombre de usuario:</label>
        <span>${elemento.nombreUsuario}</span><br>
        <label>Nombre completo:</label>
        <span>${elemento.nombreCompleto}</span><br>
        <label>Correo electrónico:</label>
        <span>${elemento.correoElectronico}</span><br>
        <label>Contraseña:</label>
        <span>${elemento.contraseña}</span><br>
        <button onclick="actualizarElemento('${elemento.nombreUsuario}')">Actualizar</button>
      `;

      container.innerHTML = plantilla;
    }

    // Función para actualizar un elemento en el localStorage
    function actualizarElemento(nombreUsuario) {
      var elementos = JSON.parse(localStorage.getItem(clave)) || [];
      var elemento = elementos.find(function (element) {
        return element.nombreUsuario === nombreUsuario;
      });

      if (elemento) {
        var nuevoNombreCompleto = prompt("Ingrese el nuevo nombre completo:");
        var nuevoCorreoElectronico = prompt("Ingrese el nuevo correo electrónico:");
        var nuevaContrasena = prompt("Ingrese la nueva contraseña:");

        elemento.nombreCompleto = nuevoNombreCompleto || elemento.nombreCompleto;
        elemento.correoElectronico = nuevoCorreoElectronico || elemento.correoElectronico;
        elemento.contraseña = nuevaContrasena || elemento.correoElectronico;

        localStorage.setItem(clave, JSON.stringify(elementos));

        mostrarElemento(elemento);
      }
    }
  </script>
</body>

</html>